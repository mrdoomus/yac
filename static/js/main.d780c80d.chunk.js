(this.webpackJsonpyac=this.webpackJsonpyac||[]).push([[0],{22:function(e,t,a){},27:function(e,t,a){e.exports=a(41)},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(11),s=a(12),r=a(16),c=a(14),l=a(1),u=a.n(l),i=a(8),o=a.n(i),m=a(7),d=a(6),E=a(25),h=(a(38),a(39),function(e){var t=e.users;return u.a.createElement("aside",{id:"sidebar"},u.a.createElement("h2",null,"Online Users"),u.a.createElement("ul",null,t.map((function(e){return u.a.createElement("li",{class:"sidebar-user",key:e.id},e.name)}))))}),p=Object(m.b)((function(e){return{users:e.users}}),{})(h),f=a(24),g=(a(22),function(e){var t=e.message,a=e.author,n=e.time,s=Object(l.useState)([]),r=Object(f.a)(s,2),c=r[0],i=r[1],o=t.split(" ").slice(1).join("+");return Object(l.useEffect)((function(){fetch("https://www.googleapis.com/youtube/v3/search?key=AIzaSyAXv4dRTaYoq8afDX3rnrgkUiisFPSje9o&type=video&part=snippet&maxResults=1&q="+o).then((function(e){return e.json()})).then((function(e){i(e.items[0].id.videoId)})).catch((function(e){console.log(e)}))}),[]),u.a.createElement("p",{class:"message"},u.a.createElement("strong",{class:"message-author"},a),": ",t,u.a.createElement("p",{class:"message-time"},n),u.a.createElement("br",null),u.a.createElement("iframe",{title:"video",width:"420",height:"315",src:"http://www.youtube.com/embed/".concat(c),frameBorder:"10",allowFullScreen:!0}))}),b=function(e){switch(e.message.split(" ")[0]){case"/youtube":return u.a.createElement(g,Object.assign({key:e.id},e));default:return u.a.createElement("p",{class:"message"},u.a.createElement("strong",{class:"message-author"},e.author),":"," ",e.message,u.a.createElement("p",{class:"message-time"},e.time))}},S=function(e){var t=e.messages;return u.a.createElement("section",{id:"messages-list"},u.a.createElement("ul",{class:"messages-list-ul"},t.map((function(e){return u.a.createElement(b,Object.assign({key:e.id},e))}))))},v=Object(m.b)((function(e){return{messages:e.messages}}),{})(S),y=function(e){var t;return u.a.createElement("section",{id:"new-message"},u.a.createElement("p",null,u.a.createElement("small",null,"New message:")),u.a.createElement("input",{class:"new-message-input",size:"100",onKeyPress:function(a){"Enter"===a.key&&(e.dispatch(t.value,"Me"),t.value="")},type:"text",ref:function(e){t=e}}))},O=0,j=0,w=new Date,D=Object(m.b)((function(){return{}}),(function(e){return{dispatch:function(t,a){e(function(e,t){return w=new Date,{type:"ADD_MESSAGE",id:O++,time:w.toLocaleTimeString(),message:e,author:t}}(t,a))}}}))(y),A=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return u.a.createElement("div",null,u.a.createElement("h1",{id:"title"},"Y.A.C"),u.a.createElement("div",{id:"container"},u.a.createElement(p,null),u.a.createElement("section",{id:"main"},u.a.createElement(v,null),u.a.createElement(D,null))))}}]),a}(l.Component),k=function(e,t){var a=new WebSocket("ws://localhost:8989");return a.onopen=function(){a.send(JSON.stringify({type:"ADD_USER",name:t}))},a.onmessage=function(t){var a,n,s,r=JSON.parse(t.data);switch(r.type){case"ADD_MESSAGE":e((n=r.message,s=r.author,w=new Date,{type:"MESSAGE_RECEIVED",id:O++,time:w.toLocaleTimeString(),message:n,author:s}));break;case"ADD_USER":e((a=r.name,{type:"ADD_USER",id:j++,name:a}));break;case"USERS_LIST":e({type:"USERS_LIST",users:r.users})}},a},_=a(15),R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":case"MESSAGE_RECEIVED":return[].concat(Object(_.a)(e),[{message:t.message,author:t.author,id:t.id,time:t.time}]);default:return e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return[].concat(Object(_.a)(e),[{name:t.name,id:t.id}]);case"USERS_LIST":return t.users;default:return e}},C=Object(d.c)({messages:R,users:U}),I=a(20),M=a.n(I),x=a(26),G=M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)("ADD_MESSAGE",(function(e){e.author=t.username,t.socket.send(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})),L=Object(E.a)(),T=Object(d.e)(C,Object(d.a)(L)),J=document.getElementById("root"),N=document.getElementById("modal"),P=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",open:!0},e.handleChange=function(t){e.setState({username:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),""===e.state.username&&(e.state.username="User"+Math.floor(100*Math.random()));var a=k(T.dispatch,e.state.username);L.run(G,{socket:a,username:e.state.username}),e.setState({open:!1})},e}return Object(s.a)(a,[{key:"render",value:function(){return this.state.open?o.a.createPortal(u.a.createElement("div",{id:"modal"},u.a.createElement("div",{class:"modal-outside"},u.a.createElement("div",{class:"modal-inside"},u.a.createElement("h1",{class:"modal-title"},u.a.createElement("strong",null,"Y.A.C")),u.a.createElement("hr",null),u.a.createElement("p",{class:"modal-subtitle"},u.a.createElement("i",null,"Please, enter your username")),u.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},u.a.createElement("div",null,u.a.createElement("input",{class:"modal-input",size:"50",type:"text",name:"username",placeholder:"User1",onChange:this.handleChange})),u.a.createElement("div",{class:"modal-button-holder"},u.a.createElement("button",{class:"modal-button",onClick:this.handleOpen,type:"submit"},"Login")),u.a.createElement("br",null))))),N):null}}]),a}(u.a.Component);o.a.render(u.a.createElement(m.a,{store:T},u.a.createElement(P,null),u.a.createElement(A,null)),J)}},[[27,1,2]]]);
//# sourceMappingURL=main.d780c80d.chunk.js.map