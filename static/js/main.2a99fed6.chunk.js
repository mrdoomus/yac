(this.webpackJsonpyac=this.webpackJsonpyac||[]).push([[0],{22:function(e,t,a){},27:function(e,t,a){e.exports=a(41)},38:function(e,t,a){},39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(11),s=a(12),r=a(16),c=a(14),l=a(1),i=a.n(l),u=a(8),o=a.n(u),m=a(7),d=a(6),E=a(25),h=(a(38),a(39),function(e){var t=e.users;return i.a.createElement("aside",{id:"sidebar"},i.a.createElement("h2",null,"Online Users"),i.a.createElement("ul",null,t.map((function(e){return i.a.createElement("li",{class:"sidebar-user",key:e.id},e.name)}))))}),p=Object(m.b)((function(e){return{users:e.users}}),{})(h),f=a(24),S=(a(22),function(e){var t=e.message,a=e.author,n=e.time,s=Object(l.useState)([]),r=Object(f.a)(s,2),c=r[0],u=r[1],o=t.split(" ").slice(1).join("+");return Object(l.useEffect)((function(){fetch("https://www.googleapis.com/youtube/v3/search?key=AIzaSyAXv4dRTaYoq8afDX3rnrgkUiisFPSje9o&type=video&part=snippet&maxResults=1&q="+o).then((function(e){return e.json()})).then((function(e){u(e.items[0].id.videoId)})).catch((function(e){console.log(e)}))}),[]),i.a.createElement("p",{class:"message"},i.a.createElement("strong",{class:"message-author"},a),": ",t,i.a.createElement("p",{class:"message-time"},n),i.a.createElement("br",null),i.a.createElement("iframe",{title:"video",width:"420",height:"315",src:"http://www.youtube.com/embed/".concat(c),frameBorder:"10",allowFullScreen:!0}))}),g=function(e){switch(e.message.split(" ")[0]){case"/youtube":return i.a.createElement(S,Object.assign({key:e.id},e));default:return i.a.createElement("p",{class:"message"},i.a.createElement("strong",{class:"message-author"},e.author),":"," ",e.message,i.a.createElement("p",{class:"message-time"},e.time))}},b=function(e){var t=e.messages;return i.a.createElement("section",{id:"messages-list"},i.a.createElement("ul",{class:"messages-list-ul"},t.map((function(e){return i.a.createElement(g,Object.assign({key:e.id},e))}))))},v=Object(m.b)((function(e){return{messages:e.messages}}),{})(b),O=function(e){var t;return i.a.createElement("section",{id:"new-message"},i.a.createElement("p",null,i.a.createElement("small",null,"New message:")),i.a.createElement("input",{class:"new-message-input",size:"100",onKeyPress:function(a){"Enter"===a.key&&(e.dispatch(t.value,"Me"),t.value="")},type:"text",ref:function(e){t=e}}))},y=0,D=0,_=new Date,j=Object(m.b)((function(){return{}}),(function(e){return{dispatch:function(t,a){e(function(e,t){return _=new Date,{type:"ADD_MESSAGE",id:y++,time:_.toLocaleTimeString(),message:e,author:t}}(t,a))}}}))(O),w=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("h1",{id:"title"},"Y.A.C"),i.a.createElement("div",{id:"container"},i.a.createElement(p,null),i.a.createElement("section",{id:"main"},i.a.createElement(v,null),i.a.createElement(j,null))))}}]),a}(l.Component),A=function(e,t){var a;return(a=void 0===Object({NODE_ENV:"production",PUBLIC_URL:"/yac",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT?new WebSocket("ws://localhost:1488"):new WebSocket("ws://localhost:"+Object({NODE_ENV:"production",PUBLIC_URL:"/yac",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).PORT.toString())).onopen=function(){a.send(JSON.stringify({type:"ADD_USER",name:t}))},a.onmessage=function(t){var a,n,s,r=JSON.parse(t.data);switch(r.type){case"ADD_MESSAGE":e((n=r.message,s=r.author,_=new Date,{type:"MESSAGE_RECEIVED",id:y++,time:_.toLocaleTimeString(),message:n,author:s}));break;case"ADD_USER":e((a=r.name,{type:"ADD_USER",id:D++,name:a}));break;case"USERS_LIST":e({type:"USERS_LIST",users:r.users})}},a},T=a(15),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":case"MESSAGE_RECEIVED":return[].concat(Object(T.a)(e),[{message:t.message,author:t.author,id:t.id,time:t.time}]);default:return e}},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_USER":return[].concat(Object(T.a)(e),[{name:t.name,id:t.id}]);case"USERS_LIST":return t.users;default:return e}},R=Object(d.c)({messages:k,users:C}),U=a(20),P=a.n(U),I=a(26),L=P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)("ADD_MESSAGE",(function(e){e.author=t.username,t.socket.send(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})),M=Object(E.a)(),N=Object(d.e)(R,Object(d.a)(M)),W=document.getElementById("root"),K=document.getElementById("modal"),x=function(e){Object(r.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),c=0;c<s;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={username:"",open:!0},e.handleChange=function(t){e.setState({username:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),""===e.state.username&&(e.state.username="User"+Math.floor(100*Math.random()));var a=A(N.dispatch,e.state.username);M.run(L,{socket:a,username:e.state.username}),e.setState({open:!1})},e}return Object(s.a)(a,[{key:"render",value:function(){return this.state.open?o.a.createPortal(i.a.createElement("div",{id:"modal"},i.a.createElement("div",{class:"modal-outside"},i.a.createElement("div",{class:"modal-inside"},i.a.createElement("h1",{class:"modal-title"},i.a.createElement("strong",null,"Y.A.C")),i.a.createElement("hr",null),i.a.createElement("p",{class:"modal-subtitle"},i.a.createElement("i",null,"Please, enter your username")),i.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},i.a.createElement("div",null,i.a.createElement("input",{class:"modal-input",size:"50",type:"text",name:"username",placeholder:"User1",onChange:this.handleChange})),i.a.createElement("div",{class:"modal-button-holder"},i.a.createElement("button",{class:"modal-button",onClick:this.handleOpen,type:"submit"},"Login")),i.a.createElement("br",null))))),K):null}}]),a}(i.a.Component);o.a.render(i.a.createElement(m.a,{store:N},i.a.createElement(x,null),i.a.createElement(w,null)),W)}},[[27,1,2]]]);
//# sourceMappingURL=main.2a99fed6.chunk.js.map